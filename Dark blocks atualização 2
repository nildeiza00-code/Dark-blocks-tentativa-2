-- Teleporte avançado com bypass de anti-cheat - Versão Delta
local player = game:GetService("Players").LocalPlayer
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local PhysicsService = game:GetService("PhysicsService")

-- Configurações do teleporte
local pathLength = 12
local teleportCooldown = 1.5

-- Estado do teleporte
local isTeleporting = false
local lastTeleportTime = 0

-- Criar grupo de colisão personalizado
if not PhysicsService:GetCollisionGroupName("TeleportBypass") then
    PhysicsService:CreateCollisionGroup("TeleportBypass")
    PhysicsService:CollisionGroupSetCollidable("TeleportBypass", "Default", false)
end

-- Função para verificar se pode teleportar
local function canTeleport()
    return (tick() - lastTeleportTime) > teleportCooldown and not isTeleporting
end

-- Função para gerenciar colisões
local function manageCollisions(char, disable)
    if not char then return end
    
    for _, part in pairs(char:GetDescendants()) do
        if part:IsA("BasePart") then
            if disable then
                part.CanCollide = false
                PhysicsService:SetPartCollisionGroup(part, "TeleportBypass")
            else
                part.CanCollide = true
                PhysicsService:SetPartCollisionGroup(part, "Default")
            end
        end
    end
end

-- Função de teleporte
local function SmoothTeleport()
    if not canTeleport() then return end
    
    isTeleporting = true
    lastTeleportTime = tick()
    
    local char = player.Character
    if not char then
        isTeleporting = false
        return
    end
    
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then 
        isTeleporting = false
        return 
    end

    -- Desativa colisão
    manageCollisions(char, true)

    -- Calcula direção
    local dir = root.CFrame.LookVector
    local targetPos = root.Position + (dir * pathLength)

    -- Move diretamente para a posição (mais eficaz no Delta)
    root.CFrame = CFrame.new(targetPos)

    -- Pequena pausa antes de restaurar colisões
    task.wait(0.1)
    manageCollisions(char, false)
    
    isTeleporting = false
end

-- Função para criar a GUI (simplificada para o Delta)
local function createSimpleGUI()
    -- Remove GUI existente
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui then
        local existingGUI = playerGui:FindFirstChild("TeleGUI")
        if existingGUI then
            existingGUI:Destroy()
        end
    end
    
    -- Cria a GUI
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "TeleGUI"
    ScreenGui.Parent = player.PlayerGui
    ScreenGui.ResetOnSpawn = false
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(0, 160, 0, 50)
    Frame.Position = UDim2.new(0.5, -80, 0.85, 0)
    Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
    Frame.BackgroundTransparency = 0.3
    Frame.BorderSizePixel = 1
    Frame.BorderColor3 = Color3.fromRGB(80, 80, 90)
    Frame.AnchorPoint = Vector2.new(0.5, 0)
    Frame.Parent = ScreenGui

    local Button = Instance.new("TextButton")
    Button.Size = UDim2.new(1, -20, 1, -20)
    Button.Position = UDim2.new(0, 10, 0, 10)
    Button.BackgroundColor3 = Color3.fromRGB(70, 100, 70)
    Button.BackgroundTransparency = 0.2
    Button.TextColor3 = Color3.fromRGB(220, 255, 220)
    Button.Font = Enum.Font.GothamBold
    Button.TextSize = 18
    Button.Text = "TELEPORTAR"
    Button.Parent = Frame
    Button.AutoButtonColor = true

    -- Conexão direta do botão
    Button.MouseButton1Click:Connect(SmoothTeleport)

    return ScreenGui
end

-- Hotkey T
UIS.InputBegan:Connect(function(input, processed)
    if processed then return end
    if input.KeyCode == Enum.KeyCode.T and canTeleport() then
        SmoothTeleport()
    end
end)

-- Inicialização otimizada para o Delta
local success, errorMsg = pcall(function()
    -- Espera pelo PlayerGui
    while not player:FindFirstChild("PlayerGui") do
        task.wait(0.1)
    end
    
    -- Cria a GUI
    createSimpleGUI()
    print("GUI do Teleporte criada com sucesso!")
end)

if not success then
    warn("Erro ao criar GUI: " .. tostring(errorMsg))
    
    -- Tenta novamente após 3 segundos
    task.wait(3)
    createSimpleGUI()
end

-- Sistema de recriação automática
RunService.Heartbeat:Connect(function()
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui and not playerGui:FindFirstChild("TeleGUI") then
        task.wait(1)
        createSimpleGUI()
    end
end)
