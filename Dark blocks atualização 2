    --[[
    Script Profissional de Teleporte + Noclip para Roblox
    Autor: nildeiza00-code + Melhorias para Anti-Cheat e Spawn
    Compatível com Delta
]]

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local TweenService = game:GetService("TweenService")
local Workspace = game:GetService("Workspace")

local localPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local teleportKey = Enum.KeyCode.F
local noclipKey = Enum.KeyCode.G

local teleportDestination = Vector3.new(100, 50, 200)  -- Destino padrão, mas pode ser alterado para spawn
local isNoclipActive = false
local isTeleporting = false
local noclipConnection = nil

-- Função para encontrar o Spawn Principal (procura SpawnLocation no Workspace)
local function getSpawnPosition()
    local spawns = Workspace:FindFirstChildOfClass("SpawnLocation")
    if spawns then
        return spawns.Position + Vector3.new(0, 3, 0)  -- Ajuste para cima do spawn
    else
        -- Se não encontrar, usa um fallback (ajuste conforme o jogo)
        return Vector3.new(0, 10, 0)  -- Posição padrão se não houver spawn
    end
end

-- Função para criar GUI com opção de Spawn
local function createTeleportGUI()
    if localPlayer:WaitForChild("PlayerGui"):FindFirstChild("TeleportPanel") then
        localPlayer.PlayerGui.TeleportPanel:Destroy()
    end

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "TeleportPanel"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = localPlayer.PlayerGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 240, 0, 180)  -- Aumentado para caber novo botão
    frame.Position = UDim2.new(0.5, -120, 0.1, 0)
    frame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
    frame.BorderSizePixel = 0
    frame.BackgroundTransparency = 0.1
    frame.Parent = screenGui

    local title = Instance.new("TextLabel")
    title.Text = "TELEPORTE PRO"
    title.Size = UDim2.new(1, 0, 0, 28)
    title.BackgroundTransparency = 1
    title.Font = Enum.Font.GothamBold
    title.TextColor3 = Color3.fromRGB(200, 255, 120)
    title.TextSize = 23
    title.Parent = frame

    -- Destino
    local coordsLabel = Instance.new("TextLabel")
    coordsLabel.Text = "Destino (X, Y, Z):"
    coordsLabel.Position = UDim2.new(0, 10, 0, 38)
    coordsLabel.Size = UDim2.new(0, 100, 0, 22)
    coordsLabel.BackgroundTransparency = 1
    coordsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    coordsLabel.Font = Enum.Font.Gotham
    coordsLabel.TextSize = 14
    coordsLabel.Parent = frame

    local xBox = Instance.new("TextBox")
    xBox.PlaceholderText = tostring(teleportDestination.X)
    xBox.Text = tostring(teleportDestination.X)
    xBox.Size = UDim2.new(0, 60, 0, 20)
    xBox.Position = UDim2.new(0, 110, 0, 38)
    xBox.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    xBox.TextColor3 = Color3.new(1, 1, 1)
    xBox.Font = Enum.Font.Gotham
    xBox.TextSize = 13
    xBox.Parent = frame

    local yBox = xBox:Clone()
    yBox.Position = UDim2.new(0, 175, 0, 38)
    yBox.Text = tostring(teleportDestination.Y)
    yBox.PlaceholderText = tostring(teleportDestination.Y)
    yBox.Parent = frame

    local zBox = xBox:Clone()
    zBox.Position = UDim2.new(0, 110, 0, 62)
    zBox.Size = UDim2.new(0, 125, 0, 20)
    zBox.Text = tostring(teleportDestination.Z)
    zBox.PlaceholderText = tostring(teleportDestination.Z)
    zBox.Parent = frame

    -- Botão Teleporte
    local teleportBtn = Instance.new("TextButton")
    teleportBtn.Text = "Teleportar (F)"
    teleportBtn.Size = UDim2.new(0.7, 0, 0, 32)
    teleportBtn.Position = UDim2.new(0.15, 0, 0, 95)
    teleportBtn.BackgroundColor3 = Color3.fromRGB(90, 190, 120)
    teleportBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
    teleportBtn.Font = Enum.Font.GothamBold
    teleportBtn.TextSize = 18
    teleportBtn.Parent = frame

    -- Botão para Spawn Principal
    local spawnBtn = Instance.new("TextButton")
    spawnBtn.Text = "Teleportar para Spawn"
    spawnBtn.Size = UDim2.new(0.7, 0, 0, 26)
    spawnBtn.Position = UDim2.new(0.15, 0, 0, 130)
    spawnBtn.BackgroundColor3 = Color3.fromRGB(120, 90, 190)
    spawnBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    spawnBtn.Font = Enum.Font.GothamBold
    spawnBtn.TextSize = 14
    spawnBtn.Parent = frame

    -- Botão Noclip
    local noclipBtn = Instance.new("TextButton")
    noclipBtn.Text = "Noclip: DESLIGADO (G)"
    noclipBtn.Size = UDim2.new(0.7, 0, 0, 26)
    noclipBtn.Position = UDim2.new(0.15, 0, 0, 160)
    noclipBtn.BackgroundColor3 = Color3.fromRGB(180, 80, 80)
    noclipBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    noclipBtn.Font = Enum.Font.GothamBold
    noclipBtn.TextSize = 14
    noclipBtn.Parent = frame

    -- Atualiza destino
    local function updateDestination()
        local x = tonumber(xBox.Text) or teleportDestination.X
        local y = tonumber(yBox.Text) or teleportDestination.Y
        local z = tonumber(zBox.Text) or teleportDestination.Z
        teleportDestination = Vector3.new(x, y, z)
    end
    xBox.FocusLost:Connect(updateDestination)
    yBox.FocusLost:Connect(updateDestination)
    zBox.FocusLost:Connect(updateDestination)

    -- Eventos dos botões
    teleportBtn.MouseButton1Click:Connect(function()
        updateDestination()
        _G.TeleportPro_TryTeleport(teleportDestination)
    end)
    spawnBtn.MouseButton1Click:Connect(function()
        local spawnPos = getSpawnPosition()
        _G.TeleportPro_TryTeleport(spawnPos)
    end)
    noclipBtn.MouseButton1Click:Connect(function()
        isNoclipActive = not isNoclipActive
        noclipBtn.Text = "Noclip: " .. (isNoclipActive and "LIGADO" or "DESLIGADO") .. " (G)"
        noclipBtn.BackgroundColor3 = isNoclipActive and Color3.fromRGB(100, 210, 100) or Color3.fromRGB(180, 80, 80)
    end)
end

-- Noclip Melhorado (usa velocity para simular movimento sem colisão detectável)
local function toggleNoclip(state)
    if not localPlayer.Character then return end
    local root = localPlayer.Character:FindFirstChild("HumanoidRootPart")
    local humanoid = localPlayer.Character:FindFirstChildOfClass("Humanoid")
    if not root or not humanoid then return end

    if state then
        if noclipConnection then noclipConnection:Disconnect() end
        noclipConnection = RunService.Heartbeat:Connect(function()
            for _, part in pairs(localPlayer.Character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.Velocity = Vector3.new(1, 0, 1) * -2e4  -- Força anti-gravidade e movimento
                end
            end
            humanoid:ChangeState(Enum.HumanoidStateType.Physics)
            humanoid.PlatformStand = true
        end)
    else
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
        humanoid.PlatformStand = false
        humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
    end
end

RunService.Stepped:Connect(function()
    if isNoclipActive then
        toggleNoclip(true)
    else
        toggleNoclip(false)
    end
end)

-- Teleporte Seguro com Anti-Cheat
local function safeTeleport(destination)
    if isTeleporting or not localPlayer.Character then return end
    isTeleporting = true

    local char = localPlayer.Character
    local root = char:FindFirstChild("HumanoidRootPart")
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    if not root or not humanoid then isTeleporting = false return end

    local originalPos = root.Position
    local prevNoclip = isNoclipActive
    isNoclipActive = true
    toggleNoclip(true)

    -- Simula movimento natural com TweenService
    local tweenInfo = TweenInfo.new(
        math.random(1, 3), -- Duração aleatória mais longa para naturalidade
        Enum.EasingStyle.Quad,
        Enum.EasingDirection.Out,
        0,
        false,
        math.random(100, 300) / 1000 -- Delay aleatório maior
    )

    local goal = {CFrame = CFrame.new(destination)}
    local tween = TweenService:Create(root, tweenInfo, goal)

    -- Simula estados do humanoid para evitar detecção
    humanoid:ChangeState(Enum.HumanoidStateType.Freefall)
    tween:Play()
    tween.Completed:Wait()

    -- Pequeno ajuste final para garantir a posição exata
    root.CFrame = CFrame.new(destination)
    humanoid:ChangeState(Enum.HumanoidStateType.Landed)
    task.wait(0.3)

    if not prevNoclip then
        isNoclipActive = false
        toggleNoclip(false)
    end

    isTeleporting = false
end

-- Função global para teleporte (aceita destino personalizado)
function _G.TeleportPro_TryTeleport(dest)
    if isTeleporting then return end
    local target = dest or teleportDestination
    task.spawn(function()
        task.wait(math.random(100, 300) / 1000) -- Delay aleatório maior para evitar detecção
        safeTeleport(target)
    end)
end

-- Hotkeys
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == teleportKey then
        _G.TeleportPro_TryTeleport(teleportDestination)
    elseif input.KeyCode == noclipKey then
        isNoclipActive = not isNoclipActive
        local panel = localPlayer.PlayerGui:FindFirstChild("TeleportPanel")
        if panel then
            local noclipBtn = panel:FindFirstChild("Frame"):FindFirstChildWhichIsA("TextButton", true)  -- Encontra o botão de noclip
            if noclipBtn and noclipBtn.Text:find("Noclip") then
                noclipBtn.Text = "Noclip: " .. (isNoclipActive and "LIGADO" or "DESLIGADO") .. " (G)"
                noclipBtn.BackgroundColor3 = isNoclipActive and Color3.fromRGB(100, 210, 100) or Color3.fromRGB(180, 80, 80)
            end
        end
    end
end)

-- Inicialização
createTeleportGUI()
StarterGui:SetCore("SendNotification", {
    Title = "Teleport Pro",
    Text = "Script carregado! Use o painel ou F (teleporte) / G (noclip). Novo: Botão para Spawn!",
    Duration = 7
})
print("Teleport Pro carregado! Use o painel ou F / G para noclip.")
